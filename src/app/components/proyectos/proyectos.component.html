<div class="card" *ngIf="!loading; else loadingTemplate">
  <p-table
    [value]="projects"
    [scrollable]="true"
    scrollHeight="400px"
    [tableStyle]="{ 'min-width': '60rem' }"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>ID</th>
        <th>Nombre del archivo</th>
        <th>Tamaño</th>
        <th>Última Modificación</th>
        <th>Estado</th> <!-- Nueva columna para mostrar el estado -->
        <th style="width: 5rem"></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-project let-rowIndex="rowIndex">
      <tr [ngClass]="{ 'unlocked': isProjectUnlocked(project) }">
        <td>{{ project.id }}</td>
        <td>{{ project.filename }}</td>
        <td>{{ project.size }}</td>
        <td>{{ project.sheetid }}</td>
        <td>{{ isProjectUnlocked(project) ? 'Desbloqueado' : 'Bloqueado' }}</td> <!-- Estado del proyecto -->
        <td>
          <button
            pButton
            pRipple
            type="button"
            [icon]="isProjectUnlocked(project) ? 'pi pi-lock-open' : 'pi pi-lock'"
            (click)="toggleLock(project)"
            size="small"
            text
          ></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<ng-template #loadingTemplate>
  <p>Cargando proyectos...</p>
</ng-template>